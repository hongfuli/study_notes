# 我查这么多数据，会不会把数据库内存打爆？

当我们执行一条查询 sql 返回大量数据的话，会不会把 mysql 的内存撑爆呢？答案是不会，因为它边扫描边发送数据的，如果传输数据跟不上，则扫描会放缓。

这里有两个因素会影响扫描速度：`net_buffer_length`，这个是 MySQL 在 server 层最大缓冲的数据，另一个是 `socket_send_buffer`，这个是 OS 参数。如果两者中有数据没有发送干净的话，会阻塞等待。

全表扫描虽然不会把内存撑爆，但是会对其它正常业务查询也有影响。
我们知道 MySQL 使用 buffer pool 做数据页内存加速，而内存是有限的，如果内存不够则会淘汰内存。使用 **LRU** 算法。但是普通的 LRU 算法有个问题，如果大量查询非热点数据，则会把内存的当前数据页都清空掉。
所以 MySQL 加强了 LRU 算法，使用了 yong, old 分代内存算法，对于一次读取的数据会直接停留在 old 区。
